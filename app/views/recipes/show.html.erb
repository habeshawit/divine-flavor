
<h1><%=@recipe.name%></h1>

<%if @recipe.images.attached?%>

    <%= image_tag  @recipe.images.first.variant(resize_to_limit: [300, 300])  %>

<%end%><br>
    

<strong>Description:</strong>
<p><%=@recipe.description%></p>

<strong>Ingredients:</strong>
<ul>
  <%@recipe.ingredients.each do |i|%>
    <li><%= i.quantity%> <%= i.name%></li> </td>
    <%end%>
    </ul>


<strong>Instructions:</strong>
<ol>
<%@recipe.steps.each do |step|%>
    <li><%= step.instructions%></li>
<%end%>
</ol>

<%if @recipe.images.attached?%>
<strong>Gallery:</strong><br>
  <% @recipe.images.each do |image| %>
    <%= link_to image_tag(image.variant(resize: "100x100")), image.variant(resize: "800x800") %>
  <% end %>
<%end%><br>


    

<% if @recipe.user_id == current_user.id%>
    <%= link_to "Edit Recipe", edit_recipe_path%> |
    <%= link_to "Delete", recipe_path(@recipe), method: :delete, data: {confirm: "Are you sure you want to delete #{@recipe.name}?" } %>
<% end %><br>

<%= render '/comments/form' %>


<%if !@recipe.comments.empty?%>
    <% @comments.each do |comment|%>
       <br> <%= comment.user.name%> says: <%= comment.content%>
       <%if @recipe.user == current_user || comment.user == current_user%>    
            <%= link_to "x", recipe_comment_path(@recipe, comment), method: :delete, data: {confirm: "Are you sure you want to delete this comment?" } %>
       <%end%>      
    <%end%>
<%end%><br>
<br><%= link_to "See all comments", recipe_comments_path(@recipe)%><br><br>